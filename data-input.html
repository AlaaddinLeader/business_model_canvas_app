<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إدخال نموذج العمل التجاري</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Cairo', sans-serif;
      min-height: 100vh;
      background: #CBDCEB;
      padding: 40px 20px;
      direction: rtl;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, #6D94C5 0%, transparent 70%);
      top: -200px;
      right: -200px;
      border-radius: 50%;
      opacity: 0.4;
      z-index: 0;
    }

    body::after {
      content: '';
      position: fixed;
      width: 500px;
      height: 500px;
      background: radial-gradient(circle, #E8DFCA 0%, transparent 70%);
      bottom: -150px;
      left: -150px;
      border-radius: 50%;
      opacity: 0.3;
      z-index: 0;
    }

    .background-shapes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }

    .shape {
      position: absolute;
      opacity: 0.08;
    }

    .shape1 {
      width: 300px;
      height: 300px;
      background: #6D94C5;
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
      top: 10%;
      left: 5%;
      animation: float 20s infinite ease-in-out;
    }

    .shape2 {
      width: 200px;
      height: 200px;
      background: #E8DFCA;
      border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
      bottom: 15%;
      right: 10%;
      animation: float 15s infinite ease-in-out reverse;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-30px) rotate(10deg);
      }
    }

    header {
      position: relative;
      max-width: 900px;
      margin: 0 auto 40px;
      text-align: center;
      z-index: 10;
      animation: fadeInDown 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    header h1 {
      font-size: 32px;
      font-weight: 800;
      color: #2c3e50;
      background: rgba(245, 239, 230, 0.95);
      backdrop-filter: blur(20px);
      padding: 24px 32px;
      border-radius: 20px;
      box-shadow: 0 12px 40px rgba(109, 148, 197, 0.2);
      letter-spacing: -0.5px;
    }

    main {
      position: relative;
      max-width: 900px;
      margin: 0 auto;
      z-index: 10;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    section {
      background: rgba(245, 239, 230, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 32px;
      box-shadow: 0 12px 40px rgba(109, 148, 197, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.5);
      animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      animation-fill-mode: both;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    section:nth-child(1) { animation-delay: 0.1s; }
    section:nth-child(2) { animation-delay: 0.15s; }
    section:nth-child(3) { animation-delay: 0.2s; }
    section:nth-child(4) { animation-delay: 0.25s; }
    section:nth-child(5) { animation-delay: 0.3s; }
    section:nth-child(6) { animation-delay: 0.35s; }
    section:nth-child(7) { animation-delay: 0.4s; }
    section:nth-child(8) { animation-delay: 0.45s; }
    section:nth-child(9) { animation-delay: 0.5s; }

    section h2 {
      font-size: 22px;
      font-weight: 800;
      color: #2c3e50;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    section h2::before {
      content: '';
      width: 6px;
      height: 24px;
      background: linear-gradient(135deg, #6D94C5 0%, #5a7ba8 100%);
      border-radius: 3px;
    }

    section > p {
      font-size: 15px;
      color: #5a6c7d;
      margin-bottom: 20px;
      line-height: 1.7;
      font-weight: 500;
    }

    label {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: #34495e;
      margin-bottom: 8px;
      margin-top: 16px;
    }

    label:first-of-type {
      margin-top: 0;
    }

    label.optional::after {
      content: '(اختياري)';
      font-size: 13px;
      font-weight: 500;
      color: #95a5a6;
      margin-right: 8px;
    }

    textarea,
    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #E8DFCA;
      border-radius: 12px;
      font-size: 15px;
      font-family: 'Cairo', sans-serif;
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      background: white;
      color: #2c3e50;
      font-weight: 500;
      margin-bottom: 12px;
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    textarea:focus,
    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #6D94C5;
      box-shadow: 0 0 0 4px rgba(109, 148, 197, 0.12);
      transform: translateY(-2px);
    }

    textarea::placeholder,
    input[type="text"]::placeholder,
    input[type="number"]::placeholder {
      color: #95a5a6;
    }

    select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%236D94C5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: left 12px center;
      background-size: 20px;
      padding-left: 40px;
    }

    /* Radio and Checkbox Styling */
    label input[type="radio"],
    label input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-left: 10px;
      cursor: pointer;
      accent-color: #6D94C5;
    }

    label:has(input[type="radio"]),
    label:has(input[type="checkbox"]) {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background: white;
      border: 2px solid #E8DFCA;
      border-radius: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    label:has(input[type="radio"]):hover,
    label:has(input[type="checkbox"]):hover {
      border-color: #6D94C5;
      background: rgba(109, 148, 197, 0.05);
      transform: translateX(-3px);
    }

    label:has(input[type="radio"]:checked),
    label:has(input[type="checkbox"]:checked) {
      border-color: #6D94C5;
      background: rgba(109, 148, 197, 0.1);
    }

    /* Resource Detail Fields */
    .resource-detail {
      margin: 12px 0 20px 40px;
      padding: 16px;
      background: rgba(255, 255, 255, 0.7);
      border: 2px dashed #E8DFCA;
      border-radius: 10px;
    }

    .resource-detail label {
      font-size: 14px;
      font-weight: 600;
      color: #5a6c7d;
      margin: 0 0 8px 0;
    }

    .resource-detail textarea {
      min-height: 70px;
      margin: 0;
      font-size: 14px;
    }

    /* Cost Table Styling */
    .cost-table-container {
      overflow-x: auto;
      margin-top: 16px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(109, 148, 197, 0.1);
    }

    table.cost-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
    }

    table.cost-table thead {
      background: linear-gradient(135deg, #6D94C5 0%, #5a7ba8 100%);
    }

    table.cost-table thead th {
      padding: 16px 12px;
      text-align: center;
      font-weight: 800;
      font-size: 15px;
      color: white;
      border-left: 1px solid rgba(255, 255, 255, 0.2);
    }

    table.cost-table thead th:first-child {
      border-right: none;
    }

    table.cost-table tbody tr {
      transition: background 0.3s ease;
    }

    table.cost-table tbody tr:nth-child(even) {
      background: rgba(203, 220, 235, 0.15);
    }

    table.cost-table tbody tr:hover {
      background: rgba(109, 148, 197, 0.1);
    }

    table.cost-table tbody td {
      padding: 12px;
      border: 1px solid #E8DFCA;
      text-align: center;
    }

    table.cost-table tbody td input {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #E8DFCA;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Cairo', sans-serif;
      background: white;
      color: #2c3e50;
      font-weight: 500;
      text-align: center;
      margin: 0;
      transition: all 0.3s ease;
    }

    table.cost-table tbody td input:focus {
      outline: none;
      border-color: #6D94C5;
      box-shadow: 0 0 0 3px rgba(109, 148, 197, 0.1);
    }

    table.cost-table tbody td.total-cell {
      background: rgba(109, 148, 197, 0.08);
      font-weight: 700;
      color: #2c3e50;
      font-size: 15px;
    }

    table.cost-table tfoot {
      background: linear-gradient(135deg, #E8DFCA 0%, #d4c9b3 100%);
    }

    table.cost-table tfoot td {
      padding: 16px 12px;
      font-weight: 800;
      font-size: 16px;
      color: #2c3e50;
      border: none;
      text-align: center;
    }

    table.cost-table tfoot td:last-child {
      color: #5a7ba8;
      font-size: 18px;
    }

    .add-row-btn {
      margin-top: 16px;
      padding: 12px 24px;
      background: white;
      border: 2px solid #6D94C5;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 700;
      font-family: 'Cairo', sans-serif;
      color: #6D94C5;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .add-row-btn:hover {
      background: #6D94C5;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(109, 148, 197, 0.3);
    }

    .add-row-btn::before {
      content: '+';
      font-size: 20px;
      font-weight: 800;
    }

    /* Suggestion Buttons */
    section > div {
      margin-top: 16px;
    }

    section > div p {
      font-size: 14px;
      font-weight: 700;
      color: #34495e;
      margin-bottom: 12px;
    }

    section > div button[type="button"] {
      display: inline-block;
      padding: 10px 18px;
      background: white;
      border: 2px solid #E8DFCA;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 700;
      font-family: 'Cairo', sans-serif;
      color: #2c3e50;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0 6px 10px 0;
    }

    section > div button[type="button"]:hover {
      border-color: #6D94C5;
      background: #CBDCEB;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(109, 148, 197, 0.2);
    }

    section > div button[type="button"]:active {
      transform: translateY(0);
    }

    /* Form Action Buttons */
    form > div:last-child {
      display: flex;
      gap: 16px;
      margin-top: 20px;
      animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      animation-delay: 0.6s;
      animation-fill-mode: both;
    }

    button[type="submit"],
    button[type="reset"] {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 14px;
      font-size: 17px;
      font-weight: 800;
      font-family: 'Cairo', sans-serif;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      overflow: hidden;
    }

    button[type="submit"] {
      background: linear-gradient(135deg, #6D94C5 0%, #5a7ba8 100%);
      color: white;
      box-shadow: 0 12px 35px rgba(109, 148, 197, 0.4);
    }

    button[type="submit"]::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    button[type="submit"]:hover::before {
      transform: translateX(100%);
    }

    button[type="submit"]:hover {
      transform: translateY(-3px);
      box-shadow: 0 16px 45px rgba(109, 148, 197, 0.5);
    }

    button[type="reset"] {
      background: white;
      color: #2c3e50;
      border: 2px solid #E8DFCA;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    button[type="reset"]:hover {
      border-color: #6D94C5;
      background: #CBDCEB;
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(109, 148, 197, 0.2);
    }

    button[type="submit"]:active,
    button[type="reset"]:active {
      transform: translateY(-1px);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 24px 16px;
      }

      header h1 {
        font-size: 24px;
        padding: 20px 24px;
      }

      section {
        padding: 24px 20px;
      }

      section h2 {
        font-size: 20px;
      }

      form > div:last-child {
        flex-direction: column;
      }

      button[type="submit"],
      button[type="reset"] {
        width: 100%;
      }

      .cost-table-container {
        font-size: 13px;
      }

      table.cost-table thead th {
        padding: 12px 8px;
        font-size: 13px;
      }

      table.cost-table tbody td {
        padding: 8px 4px;
      }

      table.cost-table tbody td input {
        padding: 8px 6px;
        font-size: 13px;
      }
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 20px;
        padding: 16px 20px;
      }

      section {
        padding: 20px 16px;
      }

      section h2 {
        font-size: 18px;
      }

      section > p {
        font-size: 14px;
      }

      .resource-detail {
        margin-right: 20px;
      }

      table.cost-table thead th {
        padding: 10px 6px;
        font-size: 12px;
      }

      table.cost-table tbody td input {
        padding: 6px 4px;
        font-size: 12px;
      }

      .add-row-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>

  <div class="background-shapes">
    <div class="shape shape1"></div>
    <div class="shape shape2"></div>
  </div>

  <!-- Header -->
  <header>
    <h1>أدخل معلومات نموذج عملك التجاري</h1>
  </header>

  <!-- Main Form Container -->
  <main>
    <form>

      <!-- 1. القيمة المضافة -->
      <section>
        <h2>القيمة المضافة (عرض القيمة)</h2>
        <p>ما الفائدة أو الميزة التي تقدمها لعملائك؟ مثل جودة أعلى أو سعر أقل أو توصيل سريع...</p>
        <textarea name="value_proposition" rows="4" placeholder="اكتب هنا..."></textarea>
        <div>
          <p>اقتراحات:</p>
          <button type="button">توصيل سريع</button>
          <button type="button">دعم فني دائم</button>
          <button type="button">منتجات محلية الصنع</button>
          <button type="button">أسعار منافسة</button>
        </div>
      </section>

      <!-- 2. الشريحة المستهدفة -->
      <section>
        <h2>الشريحة المستهدفة</h2>
        <p>من هم عملاؤك؟ حدد أعمارهم، منطقتهم، واهتماماتهم.</p>
        <label class="optional">الفئة العمرية:</label>
        <select name="age_group">
            <option value="">غير محدد</option>
            <option>أطفال</option>
            <option>شباب (في العشرينات من العمر)</option>
            <option>كهول (مابين الثلاثين والخمسين من العمر)</option>
            <option>كبار السن (فوق الخمسين)</option>
            <option>جميع الأعمار</option>
        </select>

        <label>المنطقة الجغرافية:</label>
        <select name="region">
          <option>محلي</option>
          <option>وطني</option>
          <option>دولي</option>
        </select>

        <textarea name="target_notes" rows="3" placeholder="تفاصيل إضافية..."></textarea>
      </section>

      <!-- 3. العلاقات مع العملاء -->
        <section>
            <h2>العلاقات مع العملاء</h2>
            <p>كيف تتعامل مع عملائك؟ هل هي خدمة ذاتية أم مساعدة شخصية؟</p>
            <label><input type="radio" name="relationship" value="self_service"> خدمة ذاتية</label>
            <label><input type="radio" name="relationship" value="personal_assist"> مساعدة شخصية</label>
            <label><input type="radio" name="relationship" value="automated"> خدمة آلية</label>
            <label><input type="radio" name="relationship" value="co_creation"> شراكة مع العميل</label>
            <label><input type="radio" name="relationship" value="other"> أخرى:</label>
            <input type="text" name="relationship_other" placeholder="اكتب هنا...">
        </section>

        <!-- 4. القنوات -->
        <section>
            <h2>القنوات</h2>
            <p>كيف تصل إلى عملائك أو كيف يصلون إليك؟</p>
            <label><input type="checkbox" name="channels" value="online_store"> متجر إلكتروني</label>
            <label><input type="checkbox" name="channels" value="mobile_app"> تطبيق جوال</label>
            <label><input type="checkbox" name="channels" value="physical_store"> متجر فعلي</label>
            <label><input type="checkbox" name="channels" value="agents"> مندوبين أو وكلاء</label>
            <label><input type="checkbox" name="channels" value="other"> أخرى:</label>
            <input type="text" name="channel_other" placeholder="اكتب هنا...">
        </section>

      <!-- 5. الأنشطة الرئيسية -->
      <section>
        <h2>الأنشطة الرئيسية</h2>
        <p>ما الأنشطة الأساسية التي يعتمد عليها عملك؟</p>
        <textarea name="key_activities" rows="4" placeholder="اكتب هنا..."></textarea>
        <div>
          <p>اقتراحات:</p>
          <button type="button">التصنيع</button>
          <button type="button">التسويق</button>
          <button type="button">البيع</button>
          <button type="button">التطوير التقني</button>
        </div>
      </section>

      <!-- 6. الموارد الرئيسية -->
      <section>
        <h2>الموارد الرئيسية</h2>
        <p>ما الموارد التي تحتاجها لتشغيل عملك؟</p>

        <label><input type="checkbox" name="resources" value="human"> بشرية</label>
        <div class="resource-detail">
          <label>تفاصيل الموارد البشرية:</label>
          <textarea name="human_details" placeholder="مثال: محاسب، خبير تصنيع، 10 عمال..."></textarea>
        </div>

        <label><input type="checkbox" name="resources" value="financial"> مالية</label>
        <div class="resource-detail">
          <label>تفاصيل الموارد المالية:</label>
          <textarea name="financial_details" placeholder="مثال: رأس مال، قروض، استثمارات..."></textarea>
        </div>

        <label><input type="checkbox" name="resources" value="technical"> تقنية</label>
        <div class="resource-detail">
          <label>تفاصيل الموارد التقنية:</label>
          <textarea name="technical_details" placeholder="مثال: كمبيوتر، هاتف خدمة العملاء، برمجيات..."></textarea>
        </div>

        <label><input type="checkbox" name="resources" value="equipment"> معدات</label>
        <div class="resource-detail">
          <label>تفاصيل المعدات:</label>
          <textarea name="equipment_details" placeholder="مثال: آلات، أدوات، مركبات..."></textarea>
        </div>

        <label><input type="checkbox" name="resources" value="other"> أخرى</label>
        <div class="resource-detail">
          <label>تفاصيل الموارد الأخرى:</label>
          <textarea name="resource_other_details" placeholder="اكتب هنا..."></textarea>
        </div>
      </section>

      <!-- 7. الشراكات الرئيسية -->
      <section>
        <h2>الشراكات الرئيسية</h2>
        <p>من هي الشركات والأفراد الذين تحتاج شركتك للعمل معهم لإنجاز أنشطتها؟</p>
        <textarea name="key_partners" rows="3" placeholder="اكتب هنا..."></textarea>
      </section>

      <!-- 8. مصادر الدخل -->
      <section>
        <h2>مصادر الدخل</h2>
        <p>كيف تكسب المال من عملك؟</p>
        <label><input type="checkbox" name="income" value="sales"> مبيعات مباشرة</label>
        <label><input type="checkbox" name="income" value="subscriptions"> اشتراكات</label>
        <label><input type="checkbox" name="income" value="ads"> إعلانات</label>
        <label><input type="checkbox" name="income" value="commissions"> عمولات</label>
        <label><input type="checkbox" name="income" value="other"> أخرى:</label>
        <input type="text" name="income_other" placeholder="اكتب هنا...">
      </section>

      <!-- 9. هيكل التكلفة -->
      <section>
        <h2>هيكل التكلفة</h2>
        <p>ما هي التكاليف الأساسية لتشغيل المشروع؟</p>

        <label>العملة:</label>
        <select id="currencySelect" name="currency">
          <option value="$">دولار أمريكي ($)</option>
          <option value="₺">ليرة تركية (₺)</option>
          <option value="ل.س">ليرة سورية (ل.س)</option>
        </select>

        <div class="cost-table-container">
          <table class="cost-table">
            <thead>
              <tr>
                <th>نوع المصروف</th>
                <th>الوصف</th>
                <th>التكلفة (<span class="currency-symbol">$</span>)</th>
                <th>الكمية</th>
                <th>المجموع (<span class="currency-symbol">$</span>)</th>
              </tr>
            </thead>
            <tbody id="costTableBody">
              <tr>
                <td><input type="text" placeholder="مثال: مواد خام" name="expense_type_1"></td>
                <td><input type="text" placeholder="..." name="expense_desc_1"></td>
                <td><input type="text" inputmode="decimal" placeholder="۰" name="expense_cost_1" class="cost-input" data-row="1"></td>
                <td><input type="text" inputmode="numeric" placeholder="۰" name="expense_qty_1" class="qty-input" data-row="1"></td>
                <td class="total-cell"><span class="row-total" data-row="1">۰</span></td>
              </tr>
              <tr>
                <td><input type="text" placeholder="مثال: أجور عمالة" name="expense_type_2"></td>
                <td><input type="text" placeholder="..." name="expense_desc_2"></td>
                <td><input type="text" inputmode="decimal" placeholder="۰" name="expense_cost_2" class="cost-input" data-row="2"></td>
                <td><input type="text" inputmode="numeric" placeholder="۰" name="expense_qty_2" class="qty-input" data-row="2"></td>
                <td class="total-cell"><span class="row-total" data-row="2">۰</span></td>
              </tr>
              <tr>
                <td><input type="text" placeholder="مثال: إيجار" name="expense_type_3"></td>
                <td><input type="text" placeholder="..." name="expense_desc_3"></td>
                <td><input type="text" inputmode="decimal" placeholder="۰" name="expense_cost_3" class="cost-input" data-row="3"></td>
                <td><input type="text" inputmode="numeric" placeholder="۰" name="expense_qty_3" class="qty-input" data-row="3"></td>
                <td class="total-cell"><span class="row-total" data-row="3">۰</span></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="4" style="text-align: left;">المجموع الكلي</td>
                <td id="grandTotal">۰</td>
              </tr>
            </tfoot>
          </table>
        </div>
        <button type="button" class="add-row-btn" onclick="addCostRow()">إضافة صف جديد</button>
      </section>

      <!-- Buttons -->
      <div>
        <button type="submit">إنشاء نموذج العمل</button>
        <button type="reset">مسح الحقول</button>
      </div>

    </form>
  </main>

  <script>
    let rowCounter = 3;

    // Convert Western numerals to Arabic-Indic numerals
    function toArabicNumerals(str) {
      const arabicNumerals = ['۰', '۱', '۲', '۳', '٤', '٥', '٦', '٧', '۸', '۹'];
      return str.toString().replace(/[0-9]/g, function(w) {
        return arabicNumerals[+w];
      });
    }

    // Convert Arabic-Indic numerals to Western numerals for calculations
    function toWesternNumerals(str) {
      const arabicToWestern = {
        '۰': '0', '۱': '1', '۲': '2', '۳': '3', '٤': '4',
        '٥': '5', '٦': '6', '٧': '7', '۸': '8', '۹': '9'
      };
      return str.replace(/[۰۱۲۳٤٥٦٧۸۹]/g, function(w) {
        return arabicToWestern[w];
      });
    }

    // Format number input to Arabic numerals
    function formatArabicNumber(input) {
      let value = input.value;
      // Convert to Western for validation
      let westernValue = toWesternNumerals(value);
      // Keep only numbers and decimal point
      westernValue = westernValue.replace(/[^\d.]/g, '');
      // Ensure only one decimal point
      const parts = westernValue.split('.');
      if (parts.length > 2) {
        westernValue = parts[0] + '.' + parts.slice(1).join('');
      }
      // Convert back to Arabic numerals for display
      input.value = toArabicNumerals(westernValue);
    }

    // Update currency symbol
    function updateCurrencySymbol() {
      const select = document.getElementById('currencySelect');
      const symbol = select.value;
      document.querySelectorAll('.currency-symbol').forEach(el => {
        el.textContent = symbol;
      });
    }

    // Calculate row total and grand total
    function calculateTotals() {
      let grandTotal = 0;

      document.querySelectorAll('.cost-input').forEach(input => {
        const row = input.getAttribute('data-row');
        const costInput = document.querySelector(`.cost-input[data-row="${row}"]`);
        const qtyInput = document.querySelector(`.qty-input[data-row="${row}"]`);
        const totalSpan = document.querySelector(`.row-total[data-row="${row}"]`);

        // Convert Arabic numerals to Western for calculation
        const costValue = toWesternNumerals(costInput.value);
        const qtyValue = toWesternNumerals(qtyInput.value);

        const cost = parseFloat(costValue) || 0;
        const qty = parseFloat(qtyValue) || 0;
        const rowTotal = cost * qty;

        // Display in Arabic numerals
        totalSpan.textContent = toArabicNumerals(rowTotal.toFixed(2));
        grandTotal += rowTotal;
      });

      // Display grand total in Arabic numerals
      document.getElementById('grandTotal').textContent = toArabicNumerals(grandTotal.toFixed(2));
    }

    // Add new row to cost table
    function addCostRow() {
      rowCounter++;
      const tbody = document.getElementById('costTableBody');
      const newRow = document.createElement('tr');

      newRow.innerHTML = `
        <td><input type="text" placeholder="نوع المصروف" name="expense_type_${rowCounter}"></td>
        <td><input type="text" placeholder="..." name="expense_desc_${rowCounter}"></td>
        <td><input type="text" inputmode="decimal" placeholder="۰" name="expense_cost_${rowCounter}" class="cost-input" data-row="${rowCounter}"></td>
        <td><input type="text" inputmode="numeric" placeholder="۰" name="expense_qty_${rowCounter}" class="qty-input" data-row="${rowCounter}"></td>
        <td class="total-cell"><span class="row-total" data-row="${rowCounter}">۰</span></td>
      `;

      tbody.appendChild(newRow);
      attachCalculationListeners(newRow);
    }

    // Attach event listeners to cost and quantity inputs
    function attachCalculationListeners(container) {
      container.querySelectorAll('.cost-input, .qty-input').forEach(input => {
        input.addEventListener('input', function() {
          formatArabicNumber(this);
          calculateTotals();
        });
      });
    }

    // Initialize calculation listeners on page load
    document.addEventListener('DOMContentLoaded', function() {
      attachCalculationListeners(document);

      // Add currency change listener
      document.getElementById('currencySelect').addEventListener('change', updateCurrencySymbol);
    });
  </script>

</body>
</html>
